$$v_{\pi}(s)=\sum_{a}{\pi(a|s)}[\sum_{r}{p(r|s,a)r} + \gamma \sum_{s'}{p(s'|s, a)v_{\pi}(s')}]$$

对于状态 $s_i$，贝尔曼公式：

$$v_{\pi}(s_i)=r_{\pi}(s_i) + \gamma \sum_{s_j}{p_{\pi}(s_j|s_i)v_{\pi}(s_j)}$$


向量形式：

$$v_\pi = r_\pi + \gamma P_\pi v_\pi$$

其中：

+ $v_\pi = [v_\pi(s_1), ..., v_\pi(s_n)]^T \in R^n$

+ $r_\pi = [r_\pi(s_1), ..., r_\pi(s_n)]^T \in R^n$

+ $P_\pi \in R^{n \times n}$， 其中 $P_\pi_{ij} = p_\pi(s_j|s_i)$ 是状态转移矩阵


求解：

$$v_\pi=(I - \gamma P_\pi)^{-1}r_\pi$$

实际求解采用迭代算法：

$$v_{k+1}=r_\pi + \gamma P_\pi v_k$$
